Kubernetes - How to use and contribute back to ecosystem

Thanatat Tamtan

Full-Stack Magician
CTO and Co-Founder, Acourse.io
Software Developer, Health at Home
acoshift@gmail.com
https://acoshift.me
@acoshift

* ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡∏±‡∏ô‡∏î‡∏µ üò¨

- ‡∏™‡∏£‡πâ‡∏≤‡∏á k8s cluster ‡∏ö‡∏ô GKE
- build docker ‡πÅ‡∏•‡πâ‡∏ß push ‡∏Ç‡∏∂‡πâ‡∏ô gcr.io
- ‡∏£‡∏±‡∏ô nginx ‡πÉ‡∏ô k8s
- ‡∏™‡∏£‡πâ‡∏≤‡∏á L4 ‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö nginx
- ‡∏£‡∏±‡∏ô database ‡πÉ‡∏ô k8s
- ‡∏£‡∏±‡∏ô app ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÉ‡∏ô k8s
- ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠ push ‡∏•‡∏á githut ‡πÅ‡∏•‡πâ‡∏ß build + deploy ‡πÄ‡∏≠‡∏á
- ‡∏ó‡∏≥‡πÄ‡∏ß‡πá‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô https ‡πÅ‡∏ö‡∏ö‡∏ü‡∏£‡∏µ ‡πÜ ‡∏î‡πâ‡∏ß‡∏¢ kube-lego
- ‡∏î‡∏π‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏à‡∏∞ contribute ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ k8s ecosystem ‡πÑ‡∏î‡πâ‡∏ö‡πâ‡∏≤‡∏á

* ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡∏Ç‡∏≠‡∏á k8s ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢ ‡πÜ

.image k8s-architecture.png 440 _

* ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡∏Ç‡∏≠‡∏á k8s ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≠‡∏¢‡∏•‡∏á‡∏ô‡∏¥‡∏™‡∏ô‡∏∂‡∏á

.image k8s-architecture-2.png 440 _

* Pod

- Container => ‡∏ñ‡∏±‡πà‡∏ß
- Pod => ‡∏ù‡∏±‡∏Å‡∏ñ‡∏±‡πà‡∏ß

.image pod.png 440 _

* Pod

.code pod.yaml

* Service

.image svc-1.png 440 _

* Service

.image svc-2.png 440 _

* Service

- ClusterIP
- NodePort
- LoadBalancer
- ExternalName

* Service[Type=ClusterIP]

.image svc-3.png 400 _

* Service[Type=NodePort]

.image svc-4.png 430 _

* Service[Type=LoadBalancer]

.image svc-5.png 460 _

* Service

.code svc.yaml

* Replica Set

.image rs.png 530 _

* Deployment

.image deploy.png 520 _

* ‡∏à‡∏∞‡πÄ‡∏≠‡∏≤ app ‡∏Ç‡∏∂‡πâ‡∏ô k8s ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á ?

- Health Check

.code healthcheck.go
.code healthcheck-2.go

* ‡∏à‡∏∞‡πÄ‡∏≠‡∏≤ app ‡∏Ç‡∏∂‡πâ‡∏ô k8s ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á ?

- Graceful Shutdown

.code shutdown.go

* ‡∏°‡∏≤‡∏•‡∏≠‡∏á‡∏ó‡∏≥‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞ ü§§

* üòÖ

* ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏≤‡∏à‡∏∞ contribute ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ k8s ecosystem ‡πÑ‡∏î‡πâ‡∏ö‡πâ‡∏≤‡∏á

* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ k8s app ‡∏ö‡∏≤‡∏á‡∏ï‡∏±‡∏ß graceful shutdown üò¨

.image contrib-1.png 500 _

* ‡πÄ‡∏û‡∏∑‡πà‡∏° nginx config 1 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î üò≥

.image contrib-2.png 500 _

* ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô yaml ‡πÉ‡∏´‡πâ app ‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô

.image contrib-3.png 450 _
